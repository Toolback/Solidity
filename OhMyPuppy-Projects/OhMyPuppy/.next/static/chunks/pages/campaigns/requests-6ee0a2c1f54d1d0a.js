(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[73],{19553:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/campaigns/requests",function(){return r(93554)}])},93554:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return re}});var n=r(28520),o=r.n(n),s=r(85893),i=r(67294),a=r(55923),l=r(87462),c=r(13871),u=r(86010),d=(r(45697),r(98459)),p=r(28935),f=r(12519),h=r(92248);function v(e){var t=e.children,r=e.className,n=(0,u.Z)(r),o=(0,p.Z)(v,e),s=(0,f.Z)(v,e);return i.createElement(s,(0,l.Z)({},o,{className:n}),t)}v.handledProps=["as","children","className"],v.defaultProps={as:"tbody"},v.propTypes={};var m=v,b=r(69591),y=r(45150);function g(e){var t=e.active,r=e.children,n=e.className,o=e.collapsing,s=e.content,a=e.disabled,c=e.error,v=e.icon,m=e.negative,b=e.positive,x=e.selectable,w=e.singleLine,j=e.textAlign,k=e.verticalAlign,Z=e.warning,P=e.width,R=(0,u.Z)((0,d.lG)(t,"active"),(0,d.lG)(o,"collapsing"),(0,d.lG)(a,"disabled"),(0,d.lG)(c,"error"),(0,d.lG)(m,"negative"),(0,d.lG)(b,"positive"),(0,d.lG)(x,"selectable"),(0,d.lG)(w,"single line"),(0,d.lG)(Z,"warning"),(0,d.X4)(j),(0,d.Ok)(k),(0,d.H0)(P,"wide"),n),C=(0,p.Z)(g,e),G=(0,f.Z)(g,e);return h.kK(r)?i.createElement(G,(0,l.Z)({},C,{className:R}),y.Z.create(v),s):i.createElement(G,(0,l.Z)({},C,{className:R}),r)}g.handledProps=["active","as","children","className","collapsing","content","disabled","error","icon","negative","positive","selectable","singleLine","textAlign","verticalAlign","warning","width"],g.defaultProps={as:"td"},g.propTypes={},g.create=(0,b.u5)(g,(function(e){return{content:e}}));var x=g;function w(e){var t=e.children,r=e.className,n=e.content,o=e.fullWidth,s=(0,u.Z)((0,d.lG)(o,"full-width"),r),a=(0,p.Z)(w,e),c=(0,f.Z)(w,e);return i.createElement(c,(0,l.Z)({},a,{className:s}),h.kK(t)?n:t)}w.handledProps=["as","children","className","content","fullWidth"],w.defaultProps={as:"thead"},w.propTypes={};var j=w;function k(e){var t=e.as,r=(0,p.Z)(k,e);return i.createElement(j,(0,l.Z)({},r,{as:t}))}k.handledProps=["as"],k.propTypes={},k.defaultProps={as:"tfoot"};var Z=k;function P(e){var t=e.as,r=e.className,n=e.sorted,o=(0,u.Z)((0,d.cD)(n,"sorted"),r),s=(0,p.Z)(P,e);return i.createElement(x,(0,l.Z)({},s,{as:t,className:o}))}P.handledProps=["as","className","sorted"],P.propTypes={},P.defaultProps={as:"th"};var R=P;function C(e){var t=e.active,r=e.cellAs,n=e.cells,o=e.children,s=e.className,a=e.disabled,v=e.error,m=e.negative,b=e.positive,y=e.textAlign,g=e.verticalAlign,w=e.warning,j=(0,u.Z)((0,d.lG)(t,"active"),(0,d.lG)(a,"disabled"),(0,d.lG)(v,"error"),(0,d.lG)(m,"negative"),(0,d.lG)(b,"positive"),(0,d.lG)(w,"warning"),(0,d.X4)(y),(0,d.Ok)(g),s),k=(0,p.Z)(C,e),Z=(0,f.Z)(C,e);return h.kK(o)?i.createElement(Z,(0,l.Z)({},k,{className:j}),(0,c.Z)(n,(function(e){return x.create(e,{defaultProps:{as:r}})}))):i.createElement(Z,(0,l.Z)({},k,{className:j}),o)}C.handledProps=["active","as","cellAs","cells","children","className","disabled","error","negative","positive","textAlign","verticalAlign","warning"],C.defaultProps={as:"tr",cellAs:"td"},C.propTypes={},C.create=(0,b.u5)(C,(function(e){return{cells:e}}));var G=C;function O(e){var t=e.attached,r=e.basic,n=e.celled,o=e.children,s=e.className,a=e.collapsing,v=e.color,b=e.columns,y=e.compact,g=e.definition,x=e.fixed,w=e.footerRow,k=e.headerRow,P=e.headerRows,R=e.inverted,C=e.padded,_=e.renderBodyRow,A=e.selectable,N=e.singleLine,E=e.size,q=e.sortable,T=e.stackable,H=e.striped,B=e.structured,z=e.tableData,F=e.textAlign,L=e.unstackable,S=e.verticalAlign,D=(0,u.Z)("ui",v,E,(0,d.lG)(n,"celled"),(0,d.lG)(a,"collapsing"),(0,d.lG)(g,"definition"),(0,d.lG)(x,"fixed"),(0,d.lG)(R,"inverted"),(0,d.lG)(A,"selectable"),(0,d.lG)(N,"single line"),(0,d.lG)(q,"sortable"),(0,d.lG)(T,"stackable"),(0,d.lG)(H,"striped"),(0,d.lG)(B,"structured"),(0,d.lG)(L,"unstackable"),(0,d.sU)(t,"attached"),(0,d.sU)(r,"basic"),(0,d.sU)(y,"compact"),(0,d.sU)(C,"padded"),(0,d.X4)(F),(0,d.Ok)(S),(0,d.H0)(b,"column"),"table",s),X=(0,p.Z)(O,e),K=(0,f.Z)(O,e);if(!h.kK(o))return i.createElement(K,(0,l.Z)({},X,{className:D}),o);var U={defaultProps:{cellAs:"th"}},I=(k||P)&&i.createElement(j,null,G.create(k,U),(0,c.Z)(P,(function(e){return G.create(e,U)})));return i.createElement(K,(0,l.Z)({},X,{className:D}),I,i.createElement(m,null,_&&(0,c.Z)(z,(function(e,t){return G.create(_(e,t))}))),w&&i.createElement(Z,null,G.create(w)))}O.handledProps=["as","attached","basic","celled","children","className","collapsing","color","columns","compact","definition","fixed","footerRow","headerRow","headerRows","inverted","padded","renderBodyRow","selectable","singleLine","size","sortable","stackable","striped","structured","tableData","textAlign","unstackable","verticalAlign"],O.defaultProps={as:"table"},O.propTypes={},O.Body=m,O.Cell=x,O.Footer=Z,O.Header=j,O.HeaderCell=R,O.Row=G;var _=O,A=r(80967),N=r(96215),E=r(2777),q=r(25142),T=r(1508);function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e,t,r,n,o,s,i){try{var a=e[s](i),l=a.value}catch(c){return void r(c)}a.done?t(l):Promise.resolve(l).then(n,o)}function z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var s=e.apply(t,r);function i(e){B(s,n,o,i,a,"next",e)}function a(e){B(s,n,o,i,a,"throw",e)}i(void 0)}))}}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return!t||"object"!==U(t)&&"function"!==typeof t?H(e):t}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function I(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=D(e);if(t){var o=D(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return X(this,r)}}var W=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(a,e);var t,r,n,i=I(a);function a(){var e;return F(this,a),S(H(e=i.apply(this,arguments)),"onApprove",z(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,E.Z)(this.props.address),e.next=3,T.Z.eth.getAccounts();case 3:return r=e.sent,e.next=6,t.methods.approveRequest(this.props.id).send({from:r[0]});case 6:N.Router.pushRoute("/campaigns/".concat(this.props.address,"/requests"));case 7:case"end":return e.stop()}}),e,this)})).bind(e)).bind(H(e))),S(H(e),"onFinalize",z(o().mark((function e(){var t,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,E.Z)(this.props.address),e.next=3,T.Z.eth.getAccounts();case 3:return r=e.sent,e.next=6,t.methods.finalizeRequest(this.props.id).send({from:r[0]});case 6:N.Router.pushRoute("/campaigns/".concat(this.props.address,"/requests"));case 7:case"end":return e.stop()}}),e,this)})).bind(e)).bind(H(e))),e}return t=a,(r=[{key:"render",value:function(){console.log("result from this props id"),console.log(this.props.id),console.log("result from this props address"),console.log(this.props.address),console.log("result from this props kickstarter"),console.log(this.props.kickstarter);var e=_.Row,t=_.Cell,r=this.props,n=r.id,o=r.request,i=r.voicesCount,a=o.approvalCount>i/3;return(0,s.jsxs)(e,{disabled:o.complete,positive:a&&!o.complete,children:[(0,s.jsx)(t,{children:(0,s.jsx)(q.Z,{ribbon:!0,children:n})}),(0,s.jsx)(t,{children:o.description}),(0,s.jsx)(t,{children:T.Z.utils.fromWei(o.value,"ether")}),(0,s.jsx)(t,{children:o.recipient}),(0,s.jsxs)(t,{children:[o.approvalCount,"/",o.disapprovalCount,"/",i]}),(0,s.jsx)(t,{children:o.complete?null:(0,s.jsx)(A.Z,{color:"green",basic:!0,onClick:this.onApprove,children:"Approve"})}),(0,s.jsx)(t,{children:o.complete?null:(0,s.jsx)(A.Z,{color:"teal",basic:!0,onClick:this.onFinalize,children:"Finalize"})})]})}}])&&L(t.prototype,r),n&&L(t,n),a}(i.Component);function V(e,t,r,n,o,s,i){try{var a=e[s](i),l=a.value}catch(c){return void r(c)}a.done?t(l):Promise.resolve(l).then(n,o)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t){return!t||"object"!==ee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){return e&&"undefined"!==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Q(e);if(t){var o=Q(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Y(this,r)}}var re=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(l,e);var t,r,n,i=te(l);function l(){return J(this,l),i.apply(this,arguments)}return t=l,n=[{key:"getInitialProps",value:function(e){return(t=o().mark((function t(){var r,n,s,i,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.query.kickstarter,n=(0,E.Z)(r),t.next=4,n.methods.getAllRequests().call();case 4:return s=t.sent,t.next=7,n.methods.voicesCount().call();case 7:return i=t.sent,t.next=10,Promise.all(Array(parseInt(s)).fill().map((function(e,t){return n.methods.requests(t).call()})));case 10:return a=t.sent,console.log("Result of requests:"),console.log(a),console.log("From requests>index.js:"),console.log(e),t.abrupt("return",{kickstarter:r,requests:a,requestCount:s,voicesCount:i});case 16:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var s=t.apply(e,r);function i(e){V(s,n,o,i,a,"next",e)}function a(e){V(s,n,o,i,a,"throw",e)}i(void 0)}))})();var t}}],(r=[{key:"renderRows",value:function(){var e=this;return this.props.requests.map((function(t,r){return(0,s.jsx)(W,{id:r,request:t,address:e.props.kickstarter,voicesCount:e.props.voicesCount},r)}))}},{key:"render",value:function(){return(0,s.jsxs)(a.Z,{children:[(0,s.jsx)("h3",{children:"Request"}),(0,s.jsx)(N.Link,{route:"/campaigns/".concat(this.props.kickstarter),children:(0,s.jsx)("a",{children:(0,s.jsx)(A.Z,{primary:!0,children:"Back"})})}),(0,s.jsx)(N.Link,{route:"/campaigns/".concat(this.props.kickstarter,"/requests/new"),children:(0,s.jsx)("a",{children:(0,s.jsx)(A.Z,{primary:!0,floated:"right",style:{marginBottom:10},children:"Add Request"})})}),(0,s.jsxs)(_,{celled:!0,children:[(0,s.jsx)(_.Header,{children:(0,s.jsxs)(_.Row,{children:[(0,s.jsx)(_.HeaderCell,{children:"ID"}),(0,s.jsx)(_.HeaderCell,{children:"Description"}),(0,s.jsx)(_.HeaderCell,{children:"Amount"}),(0,s.jsx)(_.HeaderCell,{children:"Recipient"}),(0,s.jsx)(_.HeaderCell,{children:"Voting Count"}),(0,s.jsx)(_.HeaderCell,{children:"Approve"}),(0,s.jsx)(_.HeaderCell,{children:"Finalize"})]})}),(0,s.jsx)(_.Body,{children:this.renderRows()})]}),(0,s.jsxs)("div",{children:["found ",this.props.requestCount," requests."]})]})}}])&&M(t.prototype,r),n&&M(t,n),l}(i.Component)}},function(e){e.O(0,[774,558,482,981,203,888,179],(function(){return t=19553,e(e.s=t);var t}));var t=e.O();_N_E=t}]);